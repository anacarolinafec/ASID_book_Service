docker network create app-net

mvn clean package -DskipTests
 
docker build -t my-bookstore-book-image .
docker build -t my-bookstore-auth-image .
docker build -t my-bookstore-cart-image . 

docker run -d --name book-service --network app-net -p 8081:8081 -e SERVER_PORT=8081 -e "SPRING_DATASOURCE_URL=jdbc:mysql://mysql-book:3306/bookstore?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC" -e SPRING_DATASOURCE_USERNAME=root -e SPRING_DATASOURCE_PASSWORD=my-secret-pw -e SPRING_JPA_HIBERNATE_DDL_AUTO=update -e SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver  my-bookstore-book-image
docker run -d --name auth-service --network app-net -p 8080:8080 -e SERVER_PORT=8080 -e "SPRING_DATASOURCE_URL=jdbc:mysql://mysql-auth:3306/bookstore?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC" -e SPRING_DATASOURCE_USERNAME=root -e SPRING_DATASOURCE_PASSWORD=my-secret-pw -e SPRING_JPA_HIBERNATE_DDL_AUTO=update -e SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver  my-bookstore-auth-image
docker run -d --name cart-service --network app-net -p 8082:8082 -e SERVER_PORT=8082 -e "SPRING_DATASOURCE_URL=jdbc:mysql://mysql-cart:3306/bookstore?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC" -e SPRING_DATASOURCE_USERNAME=root -e SPRING_DATASOURCE_PASSWORD=my-secret-pw -e SPRING_JPA_HIBERNATE_DDL_AUTO=update -e SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver  my-bookstore-cart-image

docker run -d --name my-mysql-db--network app-net -e MYSQL_ROOT_PASSWORD=your_strong_root_password \-e MYSQL_DATABASE=bookstoredb -e MYSQL_USER=bookstoreuser-e MYSQL_PASSWORD=your_strong_app_password -v mysql-data:/var/lib/mysql --restart unless-stopped mysql:8.0




docker run -d --name mysql-auth --network app-net -e MYSQL_ROOT_PASSWORD=my-secret-pw -e MYSQL_DATABASE=bookstore -e MYSQL_USER=myuser -e MYSQL_PASSWORD=mypassword  mysql:latest

docker run -d --name mysql-book --network app-net -e MYSQL_ROOT_PASSWORD=my-secret-pw -e MYSQL_DATABASE=bookstore -e MYSQL_USER=myuser -e MYSQL_PASSWORD=mypassword  mysql:latest

docker run -d --name mysql-cart --network app-net -e MYSQL_ROOT_PASSWORD=my-secret-pw -e MYSQL_DATABASE=bookstore -e MYSQL_USER=myuser -e MYSQL_PASSWORD=mypassword  mysql:latest


docker exec -it mysql-book mysql -u root -p

docker run -d --name rabbitmq --network app-net -p 5672:5672 -p 15672:15672 rabbitmq:4.0-management


SQL
use bookstore;
INSERT INTO author (author_name) VALUES ('George Orwell');
INSERT INTO category (name) VALUES ('Literature');
INSERT INTO subcategory (name, category_id) VALUES ('Dystopian', 1);

INSERT INTO book (title, isbn_number, image, description, price, quantity, author_id, category_id, subcategory_id
) VALUES ('1984', '9780451524935', NULL, 'A dystopian social science fiction novel and cautionary tale.', 19.90, 100, 1,
 1, 1);


--
Gateway

mvn clean package -DskipTests

docker build -t my-bookstore-gate-image .   

docker run -d --name gateway-service --network app-net -p 9000:9000 my-bookstore-gate-image:latest